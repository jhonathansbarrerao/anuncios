{% extends "base_template.html" %}
{% block title %}{{ evento.titulo }}{% endblock %}
{% block content %}
<h2>{{ evento.titulo }} {% if evento.destacado %}{% endif %}</h2>
<p><strong>Fecha y hora:</strong> {{ evento.fecha }} {{ evento.hora }}</p>
<p><strong>Ubicación:</strong> {{ evento.lugar }}</p>
<p><strong>Categoría:</strong> {{ evento.categoria }}</p>
<p>{{ evento.descripcion }}</p>

<h3>Asistentes ({{ evento.asistentes|length }}/{{ evento.cupo_maximo }})</h3>
<ul>
  {% for a in evento.asistentes %}
    <li>{{ a.nombre }} — {{ a.correo }}</li>
  {% else %}
    <li>Aún no hay asistentes registrados.</li>
  {% endfor %}
</ul>

{% set restantes = evento.cupo_maximo - evento.asistentes|length %}
{% if restantes > 0 %}
  <p><a href="{{ url_for('registrar_evento', slug=evento.slug) }}">Registrarme (quedan {{ restantes }})</a></p>
{% else %}
  <p><strong>Cupo lleno.</strong></p>
{% endif %}

<p><a href="{{ url_for('inicio') }}">← Volver</a></p>
{% endblock %}
